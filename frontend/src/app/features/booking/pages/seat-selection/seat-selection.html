<div class="min-h-screen surface-ground">
  <!-- Header -->
  <div class="surface-card border-b border-surface-200">
    <div class="max-w-7xl mx-auto px-6 py-4">
      <p-button
        label="Back"
        icon="pi pi-arrow-left"
        [text]="true"
        (onClick)="goBack()"
        [disabled]="isBooking"
      ></p-button>
    </div>
  </div>

  <!-- Loading State -->
  @if (isLoading) {
  <div class="flex flex-col items-center justify-center py-32">
    <p-progressSpinner styleClass="w-16 h-16"></p-progressSpinner>
    <p class="mt-6 text-surface-500 text-lg animate-pulse">Loading seat availability...</p>
  </div>
  }

  <!-- Main Content -->
  @if (!isLoading && showtime) {
  <div class="max-w-7xl mx-auto px-6 py-8">
    <!-- Page Title -->
    <div class="mb-8">
      <h1 class="text-3xl font-bold text-surface-900 mb-2">Select Your Seats</h1>
      <p class="text-surface-600">{{ showtime.movieTitle }} â€¢ {{ showtime.theaterName }}</p>
    </div>

    <!-- Seat Count Selector -->
    <div class="mb-8">
      <p-card styleClass="shadow-sm">
        <div class="flex items-center gap-4">
          <label for="seatCount" class="font-semibold text-surface-900">Number of Seats:</label>
          <p-select
            inputId="seatCount"
            [options]="seatCountOptions"
            [(ngModel)]="selectedSeatCount"
            placeholder="Select number of seats"
            (onChange)="onSeatCountChange()"
            [disabled]="isBooking"
            styleClass="w-48"
          ></p-select>
          @if (selectedSeatCount) {
          <span class="text-sm text-surface-600"
            >Select {{ selectedSeatCount }} seats from the grid below</span
          >
          }
        </div>
      </p-card>
    </div>

    <!-- Grid Layout -->
    <div class="grid lg:grid-cols-3 gap-8">
      <!-- Seat Grid Section (2/3 width) -->
      <div class="lg:col-span-2">
        <p-card styleClass="shadow-sm">
          <app-seat-grid
            [seats]="seats"
            [maxSelectable]="selectedSeatCount ?? 0"
            [disabled]="!selectedSeatCount || isBooking"
            (selectedSeatsChange)="onSelectedSeatsChange($event)"
          ></app-seat-grid>
        </p-card>
      </div>

      <!-- Booking Summary Section (1/3 width) -->
      <div class="lg:col-span-1">
        <app-booking-summary-card
          [selectedSeats]="selectedSeats"
          [showtime]="showtime"
          [isBooking]="isBooking"
          (confirmSelection)="processBooking()"
        ></app-booking-summary-card>
      </div>
    </div>
  </div>
  }
</div>
