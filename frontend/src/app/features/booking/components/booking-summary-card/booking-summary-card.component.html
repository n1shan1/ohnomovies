<p-card styleClass="shadow-xl sticky top-6 border border-surface-200">
  <ng-template pTemplate="header">
    <div class="px-6 pt-6 pb-2 bg-gradient-to-br from-primary-50 to-surface-50">
      <h2 class="text-2xl font-bold text-surface-900 flex items-center gap-2">
        <i class="pi pi-ticket text-primary-600"></i>
        Booking Summary
      </h2>
    </div>
  </ng-template>

  @if (showtime) {
  <div class="space-y-5">
    <!-- Movie & Theater Info -->
    <div class="space-y-3 p-4 bg-surface-50 rounded-lg border border-surface-200">
      <div>
        <h3 class="text-lg font-bold text-surface-900">{{ showtime.movieTitle }}</h3>
      </div>
      <div class="flex items-center gap-2 text-surface-700 text-sm">
        <i class="pi pi-building text-primary-600"></i>
        <span class="font-medium">{{ showtime.theaterName }}</span>
      </div>
      <div class="flex items-center gap-2 text-surface-700 text-sm">
        <i class="pi pi-desktop text-primary-600"></i>
        <span class="font-medium">{{ showtime.screenName }}</span>
      </div>
      <div class="flex items-center gap-2 text-surface-700 text-sm">
        <i class="pi pi-calendar text-primary-600"></i>
        <span class="font-medium">{{ formatDateTime(showtime.startTime) }}</span>
      </div>
    </div>

    <p-divider></p-divider>

    <!-- Selected Seats -->
    <div>
      <h4 class="text-sm font-bold text-surface-900 mb-3 uppercase tracking-wide">
        Selected Seats
      </h4>
      @if (selectedSeats.length === 0) {
      <p
        class="text-surface-500 text-sm italic p-4 bg-surface-50 rounded-lg border border-surface-200 text-center"
      >
        <i class="pi pi-info-circle mr-2"></i>No seats selected yet
      </p>
      } @else {
      <div class="flex flex-wrap gap-2">
        @for (seat of selectedSeats; track seat.id) {
        <p-tag
          [value]="getSeatLabel(seat)"
          styleClass="!bg-primary-500 !text-white font-bold px-3 py-1.5"
        ></p-tag>
        }
      </div>
      }
    </div>

    <p-divider></p-divider>

    <!-- Price Breakdown -->
    <div class="space-y-3">
      <div class="flex justify-between text-sm">
        <span class="text-surface-600">Subtotal ({{ selectedSeats.length }} seats)</span>
        <span class="font-semibold text-surface-900">{{ subtotal | currency : 'INR' : 'symbol' : '1.0-0' }}</span>
      </div>
      <div class="flex justify-between text-sm">
        <span class="text-surface-600">Booking Fee</span>
        <span class="font-semibold text-surface-900">{{ bookingFee | currency : 'INR' : 'symbol' : '1.0-0' }}</span>
      </div>
      <p-divider></p-divider>
      <div
        class="flex justify-between items-center p-3 bg-primary-50 rounded-lg border border-primary-200"
      >
        <span class="text-lg font-bold text-surface-900">Total</span>
        <span class="text-2xl font-bold text-primary-600">{{ totalPrice | currency : 'INR' : 'symbol' : '1.0-0' }}</span>
      </div>
    </div>
  </div>
  } @else {
  <div class="text-center py-12">
    <i class="pi pi-spin pi-spinner text-4xl text-primary-600 mb-4"></i>
    <p class="text-surface-600 font-medium">Loading showtime details...</p>
  </div>
  }

  <ng-template pTemplate="footer">
    <p-button
      label="Lock Seats & Proceed"
      icon="pi pi-lock"
      styleClass="w-full !py-3"
      [disabled]="selectedSeats.length === 0 || !showtime || isBooking"
      [loading]="isBooking"
      (onClick)="onConfirm()"
    ></p-button>
  </ng-template>
</p-card>
